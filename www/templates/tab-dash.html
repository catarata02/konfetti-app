<ion-view view-title="{{ 'KONFETTI-APP' | translate }}" class="sp-{{spClass}}" style="background-color: lightgrey;">

    <ion-nav-buttons side="first">
        <button on-tap="reloadPartyList()" ng-show="!loadingParty" class="button button-clear button-positive" style="padding-left:5px;padding-right:5px;color:grey;">
            <i id="reloadIcon" class="icon ion-ios-loop"></i>
        </button>
    </ion-nav-buttons>

    <ion-nav-buttons side="secondary">
        <select ng-model="actualLangSelect" ng-options='lang.display for lang in langSet' ng-change='selectedLang(actualLangSelect)'></select>
    </ion-nav-buttons>

    <div class="padding" style="
    background-color: lightgrey;
    z-index: 999;
    top: 40px;
    position: absolute;
    width: 100%;
    height: 110px;" ng-hide="(state==='INTRO')">

        <div class="list card ng-cloak" style="text-align: center; margin-top: 8px;">
            <div style="width:100%;padding:8px">
                <table style="width: 100%;direction: ltr;">
                    <tr>
                        <td ng-show="partyList.length>0" width="30px" style="text-align: left; vertical-align:middle;">
                            <button on-tap="buttonPartyPrev()" class="button button-light icon ion-arrow-left-b fixed-ltr"></button>
                        </td>
                        <td width="*" style="text-align: center; vertical-align: middle;" on-tap="showPartyInfo()">
                            <div ng-hide="loadingParty" style="min-height: 70px;">

                                <div style="text-align: center; font-size: 200%;">{{party.user.konfettiCount}} {{ 'KONFETTI' | translate }}</div>
                                <div style="font-weight: bold; font-size: 125%;padding-top: 8px; direction: ltr;">{{party.name}}</div>
                                <div style="direction: ltr;">({{party.meters}}m) <i class="icon ion-ios-information-outline" style="padding: 1px;"></i></div>

                            </div>
                            <div ng-show="loadingParty" style="min-height: 70px;">
                                <br>
                                <ion-spinner icon="android"></ion-spinner>
                                <div ng-show="(state==='')">
                                    {{ 'INITACCOUNT' | translate }}
                                </div>
                                <div style="color:lightgrey;font-size: 75%">
                                    {{ state | translate }}
                                </div>
                            </div>
                        </td>
                        <td ng-show="partyList.length>0" width="30px" style="text-align: right; vertical-align:middle;direction: ltr;">
                            <button on-tap="buttonPartyPrev()" class="button button-light icon ion-arrow-right-b fixed-ltr"></button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

  <ion-content>

      <div ng-show="(state==='INTRO')" class="card" style="text-align: center; margin-top: 16px;">
          <div class="item item-divider">
              {{ 'INTRO_WELCOME' | translate }}
          </div>
          <div class="item item-text-wrap">
              <ion-list>
                  <ion-item>
                      {{ 'INTRO_STEP1A' | translate }}<br><strong>{{ 'INTRO_STEP1B' | translate }}</strong>
                  </ion-item>
                  <ion-item>
                      <strong>{{ 'INTRO_STEP2A' | translate }}</strong> {{ 'INTRO_STEP2B' | translate }}
                  </ion-item>
                  <ion-item>
                      <strong>{{ 'INTRO_STEP3A' | translate }}</strong> {{ 'INTRO_STEP3B' | translate }}
                  </ion-item>
              </ion-list>
          </div>
          <div class="item item-divider">
              <button class="button button-positive" on-tap="buttonIntroScreenOK()">
                  {{ 'INTRO_LETSGO' | translate }}
              </button>
          </div>
      </div>

      <div style="height: 93px;"></div>

      <!-- pushes content far down until angular is loaded -->
      <div ng-hide="controllerInitDone" style="height: 800px;"></div>

      <div ng-show="(state==='GPSFAIL')" style="width: 100%; text-align: center; padding-top: 50px">
          <div style="font-size: 500%;color:#387ef5">
            <i class="icon ion-ios-navigate"></i>
          </div>
          <div>
              {{ 'NEEDSGPS' | translate }}
          </div>
      </div>

      <div ng-show="(state==='INTERNETFAIL')" style="width: 100%; text-align: center; padding-top: 50px">
          <div style="font-size: 500%;color:#387ef5">
              <i class="icon ion-wifi"></i>
          </div>
          <div>
              {{ 'NEEDSINTERNET' | translate }}
          </div>
      </div>

      <div ng-hide="loadingParty" class="padding">

      <!--
        NOTIFICATIONS - just show if available
      -->

      <div ng-show="showNotifications" class="list card">
          <div notification ng-show="notification.id>0" type="{{noti}}" data-ng-repeat="notification in notifications" id="notification-{{notification.id}}"></div>
      </div>

      <div class="card" ng-show="(requestsReview.length>0)">
          <div class="item item-divider" style="font-weight: bold;">
              {{ 'DASHHEADER_REVIEW' | translate }}
          </div>
      </div>

      <div requestcard data-ng-repeat="request in requestsReview" requesttype="reviewRequestCard" id="reviewRequestCard{{request.id}}" style="position: relative; margin-bottom: 10px; margin-top: 10px;"></div>

      <div class="card" ng-show="(requestsPosted.length>0)" style="margin-bottom: 10px;">
          <div class="item item-divider" style="font-weight: bold;">
              {{ 'DASHHEADER_POSTED' | translate }}
          </div>
      </div>

      <div requestcard data-ng-repeat="request in requestsPosted" requesttype="postedRequestCard" id="postedRequestCard{{request.id}}" style="position: relative;  margin-bottom: 10px; margin-top: 10px;"></div>

      <div class="card" ng-show="(requestsInteraction.length>0)" style="margin-bottom: 10px;">
          <div class="item item-divider" style="font-weight: bold;">
              {{ 'DASHHEADER_ACTIVE' | translate }}
          </div>
      </div>

      <div requestcard data-ng-repeat="request in requestsInteraction" requesttype="interactionRequestCard" id="interactionRequestCard{{request.id}}" style="position: relative;  margin-bottom: 10px; margin-top: 10px;"></div>

      <div class="card" style="margin-bottom: 10px;">
          <div class="item item-divider"  style="font-weight: bold; padding-right: 8px;">
              {{ 'DASHHEADER_OPEN' | translate }} <select ng-model="actualSorting" ng-options='sort.sort as sort.display for sort in sortSet' ng-change='changedSorting(actualSorting)' style="float:right;margin-left: 10px;"></select>
          </div>
      </div>

      <div requestcard data-ng-repeat="request in requestsOpen" requesttype="openRequestCard" id="openRequestCard{{request.id}}" style="position: relative; margin-bottom: 10px; margin-top: 10px;"></div>

      <div ng-show="(requestsOpen.length===0)" class="card" style="margin-bottom: 10px;">
           <div class="item item-text-wrap" style="font-weight: bold;">
               {{ 'NOCONTENT' | translate }}
           </div>
      </div>

      <div class="card" style="margin-bottom: 10px; margin-top: 0px; padding: 10px; text-align: center;">
          <button on-tap="onNewRequest()" class="button icon-left ion-plus-circled button-positive" style="border-radius: 6px">
               {{ 'NEWREQUEST' | translate }}
          </button>
      </div>

      </div>


  </ion-content>
</ion-view>
